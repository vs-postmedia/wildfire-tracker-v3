(this["webpackJsonpbc-wildfire-tracker"]=this["webpackJsonpbc-wildfire-tracker"]||[]).push([[0],{22:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAAAuCAIAAADiJ8FWAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFMkQ5QTUwN0RDNzkxMUVCOTUzNDgxRTg2QTBDQzVEMCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFMkQ5QTUwOERDNzkxMUVCOTUzNDgxRTg2QTBDQzVEMCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkUyRDlBNTA1REM3OTExRUI5NTM0ODFFODZBMENDNUQwIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkUyRDlBNTA2REM3OTExRUI5NTM0ODFFODZBMENDNUQwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+5ALygAAADPxJREFUeNrsnHls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"},23:function(e,t,a){e.exports=a(61)},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){e.exports=a.p+"static/media/BentonSansCond-Regular.43cd4ac7.otf"},55:function(e,t,a){e.exports=a.p+"static/media/BentonSansCond-RegItalic.69a4217c.otf"},56:function(e,t,a){e.exports=a.p+"static/media/BentonSansCond-Bold.6f6753fd.otf"},57:function(e,t,a){e.exports=a.p+"static/media/BentonSansCond-BoldItalic.a6640d89.otf"},58:function(e,t,a){e.exports=a.p+"static/media/Shift-Bold.cdd38a86.otf"},59:function(e,t,a){e.exports=a.p+"static/media/Shift-BoldItalic.5c3edbfd.otf"},60:function(e,t,a){},61:function(e,t,a){"use strict";a.r(t);var r=a(0),o=a.n(r),s=a(21),i=a.n(s),n=a(11),l=a(2),c=a(3),p=a(5),u=a(4),d=a(8),m=a.n(d),f=a(6),h=a(7),g=a(9),v=a.n(g);a(47);var E=function(e){var t,a=null!==e.INCIDNT_NM?e.INCIDNT_NM:e.GEOGRAPHIC;return"\n\t\t<div>\n\t\t\t<h3>".concat((a="null"===a?"Unnamed fire":a).replace(" ...",""),'</h3>\n\t\t\t<p class="status ').concat(e.STATUS.toLowerCase().replace(/\s/g,"-"),'">Status: ').concat(e.STATUS,"</p>\n\t\t\t<p>A ").concat(function(e){var t=(e.CURRENT_SZ/100).toFixed(2);return t<.01?"spot fire":"".concat(t," square kilometre")}(e)," fire started on ").concat(e.ignition_date.split(",")[0],".</p>\n\n\t\t\t<p>Suspected cause: ").concat(""===(t=e.FIRE_CAUSE)?"unknown":t.toLowerCase(),"</p>\n\t\t</div>\n\t")},A=(a(48),a(49),a(22)),y=a.n(A),S=function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,e)).state={},r.popup=new v.a.Popup({closeButton:!1,closeOnClick:!0}),r.showPopup=r.showPopup.bind(Object(h.a)(r)),r.hidePopup=r.hidePopup.bind(Object(h.a)(r)),r}return Object(c.a)(a,[{key:"addEvacsAlerts",value:function(e,t){this.map.addSource("evacs_alerts_arcgis",{type:"geojson",data:e}),this.map.addLayer({id:"evacs_alerts_layer",type:"fill",source:"evacs_alerts_arcgis",filter:["==",["get","EVENT_TYPE"],"Fire"],paint:{"fill-color":["match",["get","ORDER_ALERT_STATUS"],"Alert","#A7A9AB","Order","#E35D42","Tactical","#A7A9AB","#A7A9AB"],"fill-opacity":.7}},t),this.map.addLayer({id:"evac-data-text",minzoom:6,source:"evacs_alerts_arcgis",type:"symbol",filter:[">",["get","Shape__Area"],22e7],layout:{"symbol-placement":"point","text-field":["format",["concat","Evacuation ",["get","ORDER_ALERT_STATUS"]],{"font-scale":.9,"font-weight":800}]},paint:{"text-color":"rgba(255,255,255,1)","text-halo-blur":.25,"text-halo-color":["match",["get","ORDER_ALERT_STATUS"],"Alert","#A7A9AB","Order","#E35D42","Tactical","#A7A9AB","#A7A9AB"],"text-halo-width":1}})}},{key:"addFiresmokeLayer",value:function(e,t){this.map.addSource("fire-smoke",{type:"image",url:e,coordinates:[[-160,70],[-52,70],[-52,32],[-160,32]]}),this.map.addLayer({id:"fire-smoke",source:"fire-smoke",type:"raster",paint:{"raster-opacity":.6}},t),this.addFiresmokeLegend()}},{key:"addFiresmokeLegend",value:function(){}},{key:"addWildfireLayer",value:function(e,t){console.log(e),this.map.addSource("wildfires",{type:"geojson",data:e}),this.map.addLayer({id:"wildfires",type:"circle",source:"wildfires",paint:{"circle-color":["match",["get","STATUS"],"New","#DD2D25","Out of Control","#DD2D25","Being Held","#F26B21","Under Control","#0062A3","Out","#6D6E70","#9b3f86"],"circle-opacity":.7,"circle-radius":["*",["get","radius"],1],"circle-stroke-width":.5,"circle-stroke-color":"#FFF"}})}},{key:"componentDidMount",value:function(){var e,t=this.props.data;this.extent_calcuted=!1,this.range=this.props.range?this.props.range:[3.5,75],this.map=new v.a.Map((e={center:[this.props.center[1],this.props.center[0]],container:this.mapContainer,maxZoom:this.props.maxZoom,minZoom:this.props.minZoom},Object(f.a)(e,"maxZoom",30),Object(f.a)(e,"style",this.props.mapboxStyle),Object(f.a)(e,"zoom",this.props.zoom),e)),t.features&&this.renderMap(t)}},{key:"componentDidUpdate",value:function(e){this.state.mapIsLoaded?this.props.data!==e.data&&this.map.getSource("wildfires").setData(this.props.data):this.renderMap(this.props.data),this.props.selectedFeature&&this.props.selectedFeature!==e.data&&(this.flyToLocation(this.props.selectedFeature),this.showPopup(this.props.selectedFeature,!0))}},{key:"flyToLocation",value:function(e){this.map.flyTo({center:e.geometry.coordinates,zoom:8})}},{key:"getExtent",value:function(e){var t=[];return e.forEach((function(e){t.push(parseFloat(e.properties.CURRENT_SI))})),[Math.min.apply(Math,t),Math.max.apply(Math,t)]}},{key:"hidePopup",value:function(){this.map.getCanvas().style.cursor="",this.popup.remove()}},{key:"mapRange",value:function(e,t,a){return t[0]+(a-e[0])*(t[1]-t[0])/(e[1]-e[0])}},{key:"prepData",value:function(e){var t=this;this.extent_calcuted||(this.extent=this.getExtent(e.features),this.extent_calcuted=!0),e.features.forEach((function(e,a){var r=t.mapRange(t.extent,t.range,e.properties.CURRENT_SI);e.properties.radius=4*Math.log(r)})),e.features.sort((function(e,t){return t.CURRENT_SI-e.CURRENT_SI}))}},{key:"setupPopupHandlers",value:function(){this.map.on("click","wildfires",this.showPopup),this.map.on("mouseenter","wildfires",this.showPopup),this.map.on("mouseleave","wildfires",this.hidePopup),this.map.on("mouseenter","places",(function(){this.map.getCanvas().style.cursor="pointer"})),this.map.on("mouseleave","places",(function(){this.map.getCanvas().style.cursor=""}))}},{key:"setupPopupText",value:function(e){return E(e)}},{key:"showPopup",value:function(e,t){var a,r;t?(a={lng:e.geometry.coordinates[0],lat:e.geometry.coordinates[1]},r=this.setupPopupText(e.properties)):(a=e.lngLat,r=this.setupPopupText(e.features[0].properties)),this.map.getCanvas().style.cursor="pointer",this.popup.setLngLat(a).setHTML(r).addTo(this.map)}},{key:"renderMap",value:function(e){var t=this;this.prepData(e),this.map.on("load",(function(){for(var a,r=t.map.getStyle().layers,o=0;o<r.length;o++)if("symbol"===r[o].type){a=r[o].id;break}t.addFiresmokeLayer(t.props.fireSmokeUrl,a);var s=setInterval((function(){void 0!==t.props.evacsAlerts&&(clearInterval(s),t.addEvacsAlerts(t.props.evacsAlerts,a))}),1e3);t.addWildfireLayer(e,a),t.map.addControl(new v.a.NavigationControl),t.setupPopupHandlers()})),this.setState({mapIsLoaded:!0})}},{key:"render",value:function(){var e=this;return o.a.createElement(r.Fragment,null,o.a.createElement("div",{ref:function(t){return e.mapContainer=t}}),o.a.createElement("div",{className:"legend-container"},o.a.createElement("p",{className:"legend-title"},"PM",o.a.createElement("span",{className:"sub"},"2.5")," (\xb5g/m",o.a.createElement("span",{className:"super"},"3"),")"),o.a.createElement("img",{id:"firesmoke-legend",src:y.a})))}}]),a}(r.Component);a(50);var b=function(e){var t=function(e){var t={out_fires:0,new_fires:0,held_fires:0,controlled_fires:0,last_update:"Waiting for data..."};if(e.data.features){var a=e.data.features,r=a.reduce((function(e,t){return e+parseFloat(t.properties.CURRENT_SI)}),0);t.km_burned=(r/100).toFixed(0),t.total_fires=a.length+1,t.last_update=a.length>0?function(e){var t=new Date(parseInt(e)),a=(r=t.getUTCMonth(),["January","February","March","April","May","June","July","August","September","October","November","December"][parseInt(r)]);var r;return"".concat(a," ").concat(t.getDate(),", ").concat(t.getUTCFullYear()," at ").concat(t.toLocaleTimeString())}(a[0].properties.last_update):"Not available";for(var o=0;o<a.length;++o)"New"===a[o].properties.STATUS|"Out of Control"===a[o].properties.STATUS|"Fire of Note"===a[o].properties.STATUS?t.new_fires++:"Being Held"===a[o].properties.STATUS?t.held_fires++:"Under Control"===a[o].properties.STATUS?t.controlled_fires++:t.out_fires++}return t}(e);return o.a.createElement("div",{className:"summary-box",onClick:e.toggleFireTypeHandler},o.a.createElement("div",{className:"stat-box"},o.a.createElement("div",{className:"stat"},o.a.createElement("p",{className:"big-num new"},t.new_fires),o.a.createElement("p",{className:"label"},"Active")),o.a.createElement("div",{className:"stat"},o.a.createElement("p",{className:"big-num being-held"},t.held_fires),o.a.createElement("p",{className:"label"},"Held")),o.a.createElement("div",{className:"stat"},o.a.createElement("p",{className:"big-num under-control"},t.controlled_fires),o.a.createElement("p",{className:"label"},"Controlled"))),o.a.createElement("p",{className:"last-update"},"Last updated: ",t.last_update),o.a.createElement("p",{className:"note"},"Source: ",o.a.createElement("a",{href:"https://catalogue.data.gov.bc.ca/dataset/fire-locations-current",target:"_blank",rel:"noopener noreferrer"},"B.C. Wildfire Service"),". PM2.5 estimates show maximum daily values from ",o.a.createElement("a",{href:"https://firesmoke.ca/",target:"_blank",rel:"noopener noreferrer"},"FireSmoke Canada"),". NOTE: \u2018Active\u2018 fires include those classified as new, of note, and out of control. Tap buttons to toggle views."))},T=(a(51),"open");function N(e){var t=document.getElementById("listings");"open"===T?(e.target.className="closed",t.className="listings closed",T="closed"):(e.target.className="open",t.className="listings open",T="open")}var k=function(e){var t,a=e.data.length>0?e.data.filter((function(e){return"Fire of Note"===e.properties.FIRE_STATU})):[];if(console.log(a),a.length>0){t=a.sort((function(e,t){return t.properties.CURRENT_SI-e.properties.CURRENT_SI})).map((function(t){return function(e,t){var a=Math.round(e.CURRENT_SI/100*10)/10,r=e.FIRE_NT_NM,s=a>.1?"".concat(a," sq. km"):"Spot fire";return o.a.createElement("li",{key:e.FIRE_NUMBE,id:e.fire_id,className:"item",onClick:t},o.a.createElement("h4",{className:"title"},r),o.a.createElement("p",{className:"size"},s),o.a.createElement("p",{className:"location"},e.location))}(t.properties,e.flyToLocation)}));var r=document.getElementById("switch");null!==r&&(r.className="open")}else t=o.a.createElement("li",{className:"no-fires"},o.a.createElement("p",null,"Currently there are no fires of note in B.C."));return o.a.createElement("div",{className:"sidebar"},o.a.createElement("div",{className:"header"},o.a.createElement("h2",null,"Fires of Note"),o.a.createElement("div",{className:"button"},o.a.createElement("input",{type:"checkbox",id:"switch",className:"open",onChange:N}),o.a.createElement("label",{htmlFor:"switch"}))),o.a.createElement("ul",{id:"listings",className:"listings ".concat(T)},t))},F=(a(52),[55,-125]),w=function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).map_options={center:F,classField:"FIRE_STATU",maxZoom:10,minZoom:3,zoom:4},e}return Object(c.a)(a,[{key:"render",value:function(){return o.a.createElement(r.Fragment,null,o.a.createElement("h1",null,"B.C. Wildfire Tracker"),o.a.createElement(S,{center:this.map_options.center,circleMarkerClassField:this.map_options.classField,config:this.props.config,container:"mapview",data:this.props.data,evacsAlerts:this.props.data_evacs,fireSmokeUrl:this.props.fireSmokeUrl,mapboxStyle:this.props.mapboxStyle,maxZoom:this.map_options.maxZoom,minZoom:this.map_options.minZoom,selectedFeature:this.props.selectedFeature,zoom:this.map_options.zoom}),o.a.createElement(b,{data:this.props.data_all,toggleFireTypeHandler:this.props.toggleFireTypeHandler}),o.a.createElement(k,{data:this.props.data_fon,flyToLocation:this.props.flyToLocation}))}}]),a}(r.Component),U=function(e){Object(p.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={data:[],data_all:[],data_fon:[],selected_feature:null},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;m.a.get(this.props.currentData).then((function(t){var a={type:"FeatureCollection",features:t.data.features.filter((function(e){return"Out"!==e.properties.STATUS}))};e.setState({data:a,data_all:t.data}),e.setupFiresOfNote(t.data),e.fetchEvacs(e.props.evacsAlertsUrl)})),this.flyToLocation=this.flyToLocation.bind(this),this.toggleFireTypeHandler=this.toggleFireTypeHandler.bind(this)}},{key:"fetchEvacs",value:function(e){var t=this;m.a.get(e).then((function(e){200===e.status&&t.setState({data_evacs:e.data})}))}},{key:"setupFiresOfNote",value:function(e){var t=this,a=[];a.push(m.a.get(this.props.fonData)),m.a.all(a).then((function(a){var r=a.filter((function(e){return e.config.url.includes("fon.json")}))[0].data,o=e.features.filter((function(e){if("Fire of Note"===e.properties.STATUS){var t=r.filter((function(t){return t.fire_id===e.properties.FIRE_NT_ID}))[0];return e.properties=Object(n.a)(Object(n.a)({},t),e.properties),e}})).filter((function(e){return e.properties.fire_name}));t.setState({data_fon:o})}))}},{key:"filterFireData",value:function(e){if("new"===e){var t=[];return this.state.data_all.features.forEach((function(a){var r=a.properties.STATUS.replace(/\s/g,"-").toLowerCase();r===e|"out-of-control"===r&&t.push(a)})),t}return this.state.data_all.features.filter((function(t){return t.properties.STATUS.replace(/\s/g,"-").toLowerCase()===e}))}},{key:"flyToLocation",value:function(e){this.setState({selected_feature:this.state.data_fon.filter((function(t){return parseInt(t.properties.fire_id)===parseInt(e.target.parentNode.id)}))[0]})}},{key:"toggleFireTypeHandler",value:function(e){var t={type:"FeatureCollection"},a=e.target.className.split(" ")[1];a===this.state.data_displayed?(t.features=this.state.data_all.features.filter((function(e){return"Out"!==e.properties.STATUS})),a=null):"out"===a?t=this.state.data_all:t.features=this.filterFireData(a),this.setState({data_displayed:a,data:t})}},{key:"render",value:function(){return o.a.createElement(r.Fragment,null,o.a.createElement(w,{config:this.props.mapboxConfig,selectedFeature:this.state.selected_feature,data:this.state.data,data_all:this.state.data_all,data_evacs:this.state.data_evacs,data_fon:this.state.data_fon,fireSmokeUrl:this.props.fireSmokeUrl,mapboxStyle:this.props.mapboxStyle,tiles:this.props.tiles,flyToLocation:this.flyToLocation,toggleFireTypeHandler:this.toggleFireTypeHandler}))}}]),a}(r.Component),R=(a(53),{accessToken:"pk.eyJ1IjoibmdyaWZmaXRocy1wb3N0bWVkaWEiLCJhIjoiY2p5eWluaDR1MHoycTNpbnZhYnE1ZGJ5YyJ9.ky9G5qVIJn0gz_y7tULp6Q"});var I=function(){return o.a.createElement(U,{currentData:"https://raw.githubusercontent.com/vs-postmedia/bc-wildfire-scraper/master/data/wildfires.json",evacsAlertsUrl:"https://services6.arcgis.com/ubm4tcTYICKBpist/arcgis/rest/services/Evacuation_Orders_and_Alerts/FeatureServer/0/query?f=pgeojson&where=1=1&outFields=ORDER_ALERT_STATUS,SHAPE__AREA,EVENT_TYPE",fireSmokeUrl:"https://vs-postmedia-data.sfo2.digitaloceanspaces.com/wildfires/fire-smoke-max.png",fonData:"https://vs-postmedia-data.sfo2.digitaloceanspaces.com/wildfires/fon.json",firePerimeters:"https://vs-postmedia-data.sfo2.digitaloceanspaces.com/wildfires/perimeters.json",mapboxConfig:R,mapboxStyle:"https://api.maptiler.com/maps/outdoor/style.json?key=pRmETZ6APJE6l5kAzesF"})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(54),a(55),a(56),a(57),a(58),a(59),a(60);i.a.render(o.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[23,1,2]]]);
//# sourceMappingURL=main.8b93792c.chunk.js.map